{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useReducer, useRef } from 'react';\nimport useSafeDispatch from './useSafeDispatch';\nconst defaultState = {\n  data: null,\n  status: \"idle\",\n  error: null\n};\nexport default function useAsync(initialState) {\n  _s();\n\n  const initialStateRef = useRef({ ...defaultState,\n    ...initialState\n  });\n  const [{\n    data,\n    status,\n    error\n  }, setState] = useReducer((state, action) => {\n    return { ...state,\n      ...action\n    };\n  }, initialStateRef.current);\n  const safeSetState = useSafeDispatch(setState);\n  const run = useCallback(promise => {\n    if (!promise || !promise.then) throw new Error(`The argument passed to useAsync().run must be a promise`);\n    safeSetState({\n      status: \"pending\"\n    });\n    return promise.then(data => {\n      safeSetState({\n        data,\n        status: \"resolved\"\n      });\n      return data;\n    }, error => {\n      safeSetState({\n        status: \"rejected\",\n        error: JSON.parse(error.message)\n      });\n    });\n  }, [safeSetState]);\n  const setData = useCallback(data => {\n    safeSetState({\n      data\n    });\n  }, [safeSetState]);\n  const setError = useCallback(error => {\n    safeSetState({\n      error\n    });\n  }, [safeSetState]);\n  const reset = useCallback(() => {\n    safeSetState(initialStateRef.current);\n  }, [safeSetState]);\n  return {\n    data,\n    status,\n    error,\n    run,\n    setData,\n    setError,\n    reset,\n    isIdle: status === \"idle\",\n    isLoading: status === \"idle\" || status === \"pending\",\n    isError: status === \"rejected\",\n    isSuccess: status === \"resolved\"\n  };\n}\n\n_s(useAsync, \"Mm0HVPYrz5CSrEAO07wj0dQkjh4=\", false, function () {\n  return [useSafeDispatch];\n});","map":{"version":3,"names":["useCallback","useReducer","useRef","useSafeDispatch","defaultState","data","status","error","useAsync","initialState","initialStateRef","setState","state","action","current","safeSetState","run","promise","then","Error","JSON","parse","message","setData","setError","reset","isIdle","isLoading","isError","isSuccess"],"sources":["/Users/macbookpro/Documents/Iman/luxspace/src/helpers/hooks/useAsync.js"],"sourcesContent":["import { useCallback, useReducer, useRef } from 'react';\nimport useSafeDispatch from './useSafeDispatch';\n\nconst defaultState = {\n  data: null,\n  status: \"idle\",\n  error: null\n};\n\nexport default function useAsync(initialState) {\n  const initialStateRef = useRef({\n    ...defaultState, ...initialState\n  })\n\n  const [{ data, status, error }, setState] = useReducer((state, action) => {\n    return { ...state, ...action }\n  }, initialStateRef.current)\n\n  const safeSetState = useSafeDispatch(setState);\n\n  const run = useCallback(\n    (promise) => {\n      if (!promise || !promise.then)\n        throw new Error(\n          `The argument passed to useAsync().run must be a promise`\n        )\n      safeSetState({ status: \"pending\" });\n      return promise.then(\n        (data) => {\n          safeSetState({ data, status: \"resolved\" });\n          return data;\n        },\n        (error) => {\n          safeSetState({ status: \"rejected\", error: JSON.parse(error.message) });\n        });\n    },\n    [safeSetState],\n  );\n\n  const setData = useCallback(\n    (data) => {\n      safeSetState({ data });\n    },\n    [safeSetState]\n  );\n\n  const setError = useCallback(\n    (error) => {\n      safeSetState({ error });\n    },\n    [safeSetState]\n  );\n\n  const reset = useCallback(() => {\n    safeSetState(initialStateRef.current);\n  }, [safeSetState]);\n\n  return {\n    data,\n    status,\n    error,\n    run,\n    setData,\n    setError,\n    reset,\n    isIdle: status === \"idle\",\n    isLoading: status === \"idle\" || status === \"pending\",\n    isError: status === \"rejected\",\n    isSuccess: status === \"resolved\",\n  };\n}\n"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,UAAtB,EAAkCC,MAAlC,QAAgD,OAAhD;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AAEA,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAE,IADa;EAEnBC,MAAM,EAAE,MAFW;EAGnBC,KAAK,EAAE;AAHY,CAArB;AAMA,eAAe,SAASC,QAAT,CAAkBC,YAAlB,EAAgC;EAAA;;EAC7C,MAAMC,eAAe,GAAGR,MAAM,CAAC,EAC7B,GAAGE,YAD0B;IACZ,GAAGK;EADS,CAAD,CAA9B;EAIA,MAAM,CAAC;IAAEJ,IAAF;IAAQC,MAAR;IAAgBC;EAAhB,CAAD,EAA0BI,QAA1B,IAAsCV,UAAU,CAAC,CAACW,KAAD,EAAQC,MAAR,KAAmB;IACxE,OAAO,EAAE,GAAGD,KAAL;MAAY,GAAGC;IAAf,CAAP;EACD,CAFqD,EAEnDH,eAAe,CAACI,OAFmC,CAAtD;EAIA,MAAMC,YAAY,GAAGZ,eAAe,CAACQ,QAAD,CAApC;EAEA,MAAMK,GAAG,GAAGhB,WAAW,CACpBiB,OAAD,IAAa;IACX,IAAI,CAACA,OAAD,IAAY,CAACA,OAAO,CAACC,IAAzB,EACE,MAAM,IAAIC,KAAJ,CACH,yDADG,CAAN;IAGFJ,YAAY,CAAC;MAAET,MAAM,EAAE;IAAV,CAAD,CAAZ;IACA,OAAOW,OAAO,CAACC,IAAR,CACJb,IAAD,IAAU;MACRU,YAAY,CAAC;QAAEV,IAAF;QAAQC,MAAM,EAAE;MAAhB,CAAD,CAAZ;MACA,OAAOD,IAAP;IACD,CAJI,EAKJE,KAAD,IAAW;MACTQ,YAAY,CAAC;QAAET,MAAM,EAAE,UAAV;QAAsBC,KAAK,EAAEa,IAAI,CAACC,KAAL,CAAWd,KAAK,CAACe,OAAjB;MAA7B,CAAD,CAAZ;IACD,CAPI,CAAP;EAQD,CAfoB,EAgBrB,CAACP,YAAD,CAhBqB,CAAvB;EAmBA,MAAMQ,OAAO,GAAGvB,WAAW,CACxBK,IAAD,IAAU;IACRU,YAAY,CAAC;MAAEV;IAAF,CAAD,CAAZ;EACD,CAHwB,EAIzB,CAACU,YAAD,CAJyB,CAA3B;EAOA,MAAMS,QAAQ,GAAGxB,WAAW,CACzBO,KAAD,IAAW;IACTQ,YAAY,CAAC;MAAER;IAAF,CAAD,CAAZ;EACD,CAHyB,EAI1B,CAACQ,YAAD,CAJ0B,CAA5B;EAOA,MAAMU,KAAK,GAAGzB,WAAW,CAAC,MAAM;IAC9Be,YAAY,CAACL,eAAe,CAACI,OAAjB,CAAZ;EACD,CAFwB,EAEtB,CAACC,YAAD,CAFsB,CAAzB;EAIA,OAAO;IACLV,IADK;IAELC,MAFK;IAGLC,KAHK;IAILS,GAJK;IAKLO,OALK;IAMLC,QANK;IAOLC,KAPK;IAQLC,MAAM,EAAEpB,MAAM,KAAK,MARd;IASLqB,SAAS,EAAErB,MAAM,KAAK,MAAX,IAAqBA,MAAM,KAAK,SATtC;IAULsB,OAAO,EAAEtB,MAAM,KAAK,UAVf;IAWLuB,SAAS,EAAEvB,MAAM,KAAK;EAXjB,CAAP;AAaD;;GA7DuBE,Q;UASDL,e"},"metadata":{},"sourceType":"module"}